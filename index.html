<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>Mesut - HelloBase Mini dApp</title>

  <!-- Ethers.js (v5) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>

  <style>
    :root {
      --bg: #020617;
      --bg-card: #020617;
      --border: #1e293b;
      --accent: #3b82f6;
      --accent-soft: rgba(59, 130, 246, 0.15);
      --text-main: #e5e7eb;
      --text-sub: #9ca3af;
      --text-muted: #6b7280;
    }

    * {
      box-sizing: border-box;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1d4ed8 0, #020617 40%, #000 100%);
      color: var(--text-main);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 16px;
    }

    .shell {
      width: 100%;
      max-width: 960px;
      display: grid;
      grid-template-columns: minmax(0, 3fr) minmax(0, 2fr);
      gap: 20px;
    }

    @media (max-width: 768px) {
      .shell {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: 20px;
      padding: 22px;
      box-shadow:
        0 22px 45px rgba(0, 0, 0, 0.75),
        0 0 0 1px rgba(15, 23, 42, 0.9);
      position: relative;
      overflow: hidden;
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at top left, rgba(59,130,246,0.18) 0, transparent 55%);
      opacity: 0.6;
      pointer-events: none;
    }

    .card-inner {
      position: relative;
      z-index: 1;
    }

    .header-row {
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
      margin-bottom: 16px;
    }

    .logo-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(51, 65, 85, 0.8);
      font-size: 11px;
      color: var(--text-sub);
    }

    .logo-circle {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: #0ea5e9;
      box-shadow: 0 0 0 3px rgba(14,165,233,0.25);
    }

    h1 {
      font-size: 20px;
      margin: 0;
      color: #e0f2fe;
      letter-spacing: 0.02em;
    }

    .subtitle {
      font-size: 12px;
      color: var(--text-sub);
      margin-top: 4px;
    }

    .badge-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 10px;
    }

    .badge {
      font-size: 10px;
      border-radius: 999px;
      padding: 3px 9px;
      border: 1px solid rgba(51, 65, 85, 0.9);
      color: var(--text-sub);
      background: rgba(15, 23, 42, 0.9);
    }

    button {
      background: var(--accent);
      border: none;
      border-radius: 999px;
      color: white;
      padding: 8px 16px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 500;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
      transition: all 0.15s ease;
    }

    button:hover {
      background: #1d4ed8;
      transform: translateY(-1px);
      box-shadow: 0 10px 30px rgba(37, 99, 235, 0.35);
    }

    button:disabled {
      background: #4b5563;
      cursor: not-allowed;
      box-shadow: none;
      transform: none;
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(51, 65, 85, 0.9);
      color: var(--text-sub);
      box-shadow: none;
    }

    .btn-secondary:hover {
      background: rgba(30, 64, 175, 0.6);
      border-color: #3b82f6;
      color: #e5e7eb;
    }

    .section {
      margin-top: 18px;
    }

    .label-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
    }

    .label {
      font-size: 11px;
      color: var(--text-sub);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .value-box {
      border-radius: 14px;
      border: 1px solid var(--border);
      padding: 10px 12px;
      background: rgba(15, 23, 42, 0.96);
      font-size: 12px;
      word-break: break-all;
      min-height: 38px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .value-main {
      font-size: 12px;
      color: var(--text-main);
      opacity: 0.9;
    }

    .value-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    .pill {
      font-size: 10px;
      border-radius: 999px;
      padding: 3px 7px;
      border: 1px solid rgba(55, 65, 81, 0.9);
      color: var(--text-sub);
    }

    input {
      width: 100%;
      padding: 9px 11px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.96);
      color: var(--text-main);
      font-size: 13px;
      outline: none;
      transition: all 0.12s ease;
    }

    input::placeholder {
      color: #6b7280;
    }

    input:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(59,130,246,0.7);
    }

    .status {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 4px;
      min-height: 16px;
      white-space: pre-line;
    }

    .hint {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 10px;
    }

    .tag {
      display: inline-flex;
      font-size: 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      padding: 2px 9px;
      color: var(--text-sub);
      margin-right: 6px;
    }

    .side-card-title {
      font-size: 13px;
      font-weight: 500;
      margin-bottom: 8px;
    }

    .timeline {
      border-left: 1px solid rgba(51, 65, 85, 0.9);
      margin-left: 5px;
      padding-left: 14px;
      margin-top: 6px;
    }

    .timeline-item {
      margin-bottom: 12px;
      position: relative;
    }

    .timeline-item::before {
      content: "";
      position: absolute;
      left: -15px;
      top: 4px;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: #3b82f6;
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.3);
    }

    .timeline-title {
      font-size: 12px;
      color: var(--text-main);
    }

    .timeline-sub {
      font-size: 11px;
      color: var(--text-sub);
    }
  </style>
</head>
<body>
  <div class="shell">
    <!-- Ana dApp kartÄ± -->
    <div class="card">
      <div class="card-inner">
        <div class="header-row">
          <div>
            <div class="logo-pill">
              <div class="logo-circle"></div>
              <span>Base â€¢ Onchain Mini dApp</span>
            </div>
            <h1>HelloBase Dashboard</h1>
            <div class="subtitle">
              Mesutâ€™un Base Ã¼zerindeki doÄŸrulanmÄ±ÅŸ kontratÄ±yla cÃ¼zdanÄ±ndan direkt etkileÅŸime geÃ§.
            </div>
            <div class="badge-row">
              <div class="badge">Deployed â€¢ 0xD6e4â€¦c8F8</div>
              <div class="badge">Verified on BaseScan</div>
              <div class="badge">Built by Mesut</div>
            </div>
          </div>
          <div>
            <button id="connectButton">
              <span>ğŸ”— CÃ¼zdanÄ± BaÄŸla</span>
            </button>
          </div>
        </div>

        <!-- CÃ¼zdan / AÄŸ Bilgisi -->
        <div class="section">
          <div class="label-row">
            <span class="label">BaÄŸlantÄ± durumu</span>
            <span class="pill">MetaMask â€¢ Base</span>
          </div>
          <div class="value-box" id="walletInfo">
            <div class="value-main">BaÄŸlÄ± deÄŸil</div>
          </div>
        </div>

        <!-- Kontrat Adresi -->
        <div class="section">
          <div class="label-row">
            <span class="label">Kontrat adresi</span>
            <span class="pill">HelloBase.sol</span>
          </div>
          <div class="value-box">
            <div class="value-main">
              0xD6e402b477B05f8105be4fAaC4a43E0355aCc8F8
            </div>
          </div>
        </div>

        <!-- Mesaj Oku -->
        <div class="section">
          <div class="label-row">
            <span class="label">Aktif mesaj (message)</span>
            <button class="btn-secondary" id="refreshMessageButton">Yenile</button>
          </div>
          <div class="value-box">
            <div class="value-main" id="currentMessage">-</div>
          </div>
        </div>

        <!-- Mesaj Yaz -->
        <div class="section">
          <div class="label-row">
            <span class="label">Yeni mesaj yaz</span>
          </div>
          <input id="newMessageInput" placeholder="Ã–rn: Merhaba Base, Mesut buradaydÄ± âœ¨" />
          <div class="label-row" style="margin-top: 10px;">
            <div class="status" id="txStatus"></div>
            <button id="setMessageButton" disabled>MesajÄ± GÃ¼ncelle</button>
          </div>
        </div>

        <div class="hint">
          <span class="tag">Ä°pucu</span>
          KontratÄ± hangi aÄŸda deploy ettiysen (Base Mainnet veya Base Sepolia) MetaMaskâ€™te o aÄŸÄ± seÃ§.
          Ä°ÅŸlem detayÄ± iÃ§in MetaMaskâ€™teki â€œView on explorerâ€ linkine tÄ±klayabilirsin.
        </div>
      </div>
    </div>

    <!-- SaÄŸ tarafta kÃ¼Ã§Ã¼k info panel -->
    <div class="card">
      <div class="card-inner">
        <div class="side-card-title">Bu mini dApp ne yapÄ±yor?</div>
        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-title">1. CÃ¼zdanÄ±nÄ± baÄŸlÄ±yorsun</div>
            <div class="timeline-sub">
              MetaMask ile Base aÄŸÄ±na baÄŸlanÄ±yorsun. dApp, sadece sen onay verdiÄŸinde iÅŸlem gÃ¶nderiyor.
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-title">2. Kontrattaki mesajÄ± okuyor</div>
            <div class="timeline-sub">
              HelloBase kontratÄ±ndaki <code>message()</code> fonksiyonunu Ã§aÄŸÄ±rÄ±p zincirdeki gÃ¼ncel mesajÄ± gÃ¶steriyor.
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-title">3. On-chain mesaj gÃ¼ncelleme</div>
            <div class="timeline-sub">
              YazdÄ±ÄŸÄ±n yeni mesaj, <code>setMessage()</code> ile doÄŸrudan Base Ã¼zerindeki kontrata kaydediliyor.
            </div>
          </div>
          <div class="timeline-item">
            <div class="timeline-title">4. TÃ¼m iÅŸlemler BaseScanâ€™de izlenebilir</div>
            <div class="timeline-sub">
              Her tx; BaseScan Ã¼zerinde kontrat adresi ve senin cÃ¼zdanÄ±n Ã¼zerinden gÃ¶rÃ¼lebilir.
            </div>
          </div>
        </div>

        <div class="hint" style="margin-top: 14px;">
          Bu dApp, Mesutâ€™un Base ekosisteminde builder olarak ilk adÄ±mlarÄ±nÄ± gÃ¶sterir.  
          Ä°leride buraya: token, NFT, leaderboard ve daha fazla on-chain Ã¶zellik ekleyebilirsin. ğŸ’™
        </div>

        <!-- Sosyal Linkler -->
        <div style="margin-top: 24px;">
          <div class="side-card-title" style="margin-bottom: 12px;">Sosyal BaÄŸlantÄ±lar</div>

          <div style="display: flex; flex-direction: column; gap: 10px;">

            <!-- Twitter -->
            <a href="https://x.com/soylebisey" target="_blank"
               style="
                 display:flex; align-items:center; gap:10px;
                 padding:10px 14px; border-radius:12px;
                 background:rgba(15,23,42,0.85);
                 border:1px solid rgba(51,65,85,0.7);
                 text-decoration:none; color:#e5e7eb; font-size:13px;
                 transition:all .15s ease;
               "
               onmouseover="this.style.background='rgba(37,99,235,0.25)'; this.style.borderColor='#3b82f6';"
               onmouseout="this.style.background='rgba(15,23,42,0.85)'; this.style.borderColor='rgba(51,65,85,0.7)';">
              <span style="font-size:17px;">ğŸ¦</span>
              <span>X (Twitter)</span>
            </a>

            <!-- GitHub -->
            <a href="https://github.com/Mesut006" target="_blank"
               style="
                 display:flex; align-items:center; gap:10px;
                 padding:10px 14px; border-radius:12px;
                 background:rgba(15,23,42,0.85);
                 border:1px solid rgba(51,65,85,0.7);
                 text-decoration:none; color:#e5e7eb; font-size:13px;
                 transition:all .15s ease;
               "
               onmouseover="this.style.background='rgba(37,99,235,0.25)'; this.style.borderColor='#3b82f6';"
               onmouseout="this.style.background='rgba(15,23,42,0.85)'; this.style.borderColor='rgba(51,65,85,0.7)';">
              <span style="font-size:17px;">ğŸ™</span>
              <span>GitHub</span>
            </a>

            <!-- Paragraph -->
            <a href="https://paragraph.com/@0xf159092ad36e8d0524be07f703866b1866d3d94d" target="_blank"
               style="
                 display:flex; align-items:center; gap:10px;
                 padding:10px 14px; border-radius:12px;
                 background:rgba(15,23,42,0.85);
                 border:1px solid rgba(51,65,85,0.7);
                 text-decoration:none; color:#e5e7eb; font-size:13px;
                 transition:all .15s ease;
               "
               onmouseover="this.style.background='rgba(37,99,235,0.25)'; this.style.borderColor='#3b82f6';"
               onmouseout="this.style.background='rgba(15,23,42,0.85)'; this.style.borderColor='rgba(51,65,85,0.7)';">
              <span style="font-size:17px;">ğŸ“</span>
              <span>Paragraph</span>
            </a>

          </div>
        </div>

      </div>
    </div>
  </div>

  <script>
    const ethers = window.ethers;

    // Senin kontrat adresin
    const CONTRACT_ADDRESS = "0xD6e402b477B05f8105be4fAaC4a43E0355aCc8F8";

    // HelloBase ABI
    const CONTRACT_ABI = [
      {
        "inputs": [],
        "name": "message",
        "outputs": [{ "internalType": "string", "name": "", "type": "string" }],
        "stateMutability": "view",
        "type": "function"
      },
      {
        "inputs": [{ "internalType": "string", "name": "newMessage", "type": "string" }],
        "name": "setMessage",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
      }
    ];

    let provider;
    let signer;
    let contract;

    const connectButton = document.getElementById("connectButton");
    const walletInfo = document.getElementById("walletInfo");
    const currentMessageEl = document.getElementById("currentMessage");
    const refreshMessageButton = document.getElementById("refreshMessageButton");
    const newMessageInput = document.getElementById("newMessageInput");
    const setMessageButton = document.getElementById("setMessageButton");
    const txStatus = document.getElementById("txStatus");

    async function connectWallet() {
      if (!window.ethereum) {
        alert("MetaMask bulunamadÄ±. LÃ¼tfen Chrome eklentisinin kurulu olduÄŸundan emin ol.");
        return;
      }

      try {
        const accounts = await window.ethereum.request({
          method: "eth_requestAccounts"
        });

        provider = new ethers.providers.Web3Provider(window.ethereum);
        signer = provider.getSigner();
        const network = await provider.getNetwork();

        contract = new ethers.Contract(CONTRACT_ADDRESS, CONTRACT_ABI, signer);

        walletInfo.textContent = `AÄŸ chainId: ${network.chainId} | CÃ¼zdan: ${accounts[0]}`;
        connectButton.textContent = "BaÄŸlÄ±";
        setMessageButton.disabled = false;

        await readMessage();
      } catch (e) {
        console.error(e);
        alert("CÃ¼zdan baÄŸlanÄ±rken hata oluÅŸtu: " + (e.message || e));
      }
    }

    async function readMessage() {
      if (!contract) {
        currentMessageEl.textContent = "Kontrat baÄŸlÄ± deÄŸil.";
        return;
      }
      try {
        currentMessageEl.textContent = "YÃ¼kleniyor...";
        const msg = await contract.message();
        currentMessageEl.textContent = msg || "(BoÅŸ)";
      } catch (e) {
        console.error(e);
        currentMessageEl.textContent = "Mesaj okunurken hata.";
      }
    }

    async function setMessage() {
      if (!contract) {
        alert("Ã–nce cÃ¼zdanÄ± baÄŸlamalÄ±sÄ±n.");
        return;
      }
      const text = newMessageInput.value.trim();
      if (!text) {
        alert("LÃ¼tfen bir mesaj yaz.");
        return;
      }

      try {
        txStatus.textContent = "Ä°ÅŸlem gÃ¶nderiliyor...";
        setMessageButton.disabled = true;

        const tx = await contract.setMessage(text);
        txStatus.textContent = "Onay bekleniyor...";

        await tx.wait();

        txStatus.textContent = "Ä°ÅŸlem onaylandÄ± âœ…";
        await readMessage();
        setTimeout(() => (txStatus.textContent = ""), 4000);
      } catch (e) {
        console.error(e);
        txStatus.textContent = "Ä°ÅŸlem hatasÄ±: " + (e.message || e);
      } finally {
        setMessageButton.disabled = false;
      }
    }

    connectButton.addEventListener("click", connectWallet);
    refreshMessageButton.addEventListener("click", readMessage);
    setMessageButton.addEventListener("click", setMessage);
  </script>
</body>
</html>
